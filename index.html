<!DOCTYPE html>

<head>
    <title>Home - Komali.dev</title>
    <meta name="description" content="Komali's website; It's not much but some aspects of it are neat" />
    <!-- No idea how these things work -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://komali.dev/" />
    <meta property="og:title" content="Komali.dev" />
    <meta property="og:image" content="https://komali.dev/komali2Lurk.png" />
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="js/box.css" /> <!-- oops -->
    <script src="js/regex_html_parser.js"></script>
    <script src="js/drag.js"></script>
    <script src="js/alert.js"></script>
    <script src="js/specs.js"></script>
</head>

<body>
    <img src="" id="bg_img" class="background" />
    <img src="https://komali.dev/background_images/texture.png" class="background" style="opacity:.5" />
    <div class="stella">
        <p id="txt">Yes, this my cat<br>Her name is Stella</p><img src="stella_lurk.png" onclick="show_cat()" />
    </div>

    <div id="main">
        <a href='https://discord.gg/QWCcXMe' target="_blank"><img src="resources/discord.png" class="icon" /></a>
        <a href='https://youtube.com/c/KomaliPrinceOfRito' target="_blank"><img src="resources/youtube.png"
                class="icon" /></a>
        <a href='https://twitch.tv/komali09' target="_blank"><img src="resources/twitch.png" class="icon" /></a>
        <a href='https://github.com/PrinceKomali' target="_blank"><img src="resources/gh.png" class="icon" /></a>
        <a href='https://www.speedrun.com/user/Komali' target="_blank"><img src="resources/src.png" class="icon" /></a>
        <a href='https://codegolf.stackexchange.com/users/107262/komali' target="_blank"><img src="resources/cgcc.png"
                class="icon" /></a>
        <div id="inner">
            <h1><span class='big1'>Hi!&nbsp;</span>I'm Komali</h1>
            <p>I'm a Breath of the Wild speedrunner + leaderboard verifier and a self-taught coding nerd</p>
            <p>I also like geography <img id='flag' /></p>
            <hr />
            <p>Popular Projects</p>
            <a href='https://islandle.komali.dev' target="_blank">
                <div class="widget">
                    <img src="https://islandle.komali.dev/favicons/favicon.png" />
                    <span>Islandle</span>
                </div>
            </a>
            <a href='https://worldleunlimited.komali.dev' target="_blank">
                <div class="widget">
                    <img src="https://worldleunlimited.komali.dev/logo192.png" />
                    <span>Worldle Unlimited</span>
                </div>
            </a>
            <a href='https://komali.dev/BotW-IL-Timer' target="_blank">
                <div class="widget">
                    <img src="https://komali.dev/BotW-IL-Timer/favicon.ico" />
                    <span>IL Timer</span>
                </div>
            </a>
            
            
            <p>Other Projects</p>
            <a href='https://flags.komali.dev' target="_blank">
                <div class="widget">
                    <img src="ca-qc.png" class="crop square" />
                    <span>flags.komali.dev</span>
                </div>
            </a>
            <a href='/mgtc' target="_blank">
                <div class="widget">
                    <img src="/mgtc/icon.png" class="crop square" />
                    <span>Multi-Game TAS Competition</span>
                </div>
            </a>
            <a href='/hbc' target="_blank">
                <div class="widget">
                    <img src="/hbc/icon.png" class="crop square" />
                    <span>Hyrule Bike Challenge</span>
                </div>
            </a>
            
            <a href='https://komali.dev/autowiggler' target="_blank">
                <div class="widget">
                    <img src="https://komali.dev/autowiggler/logo.png" class='crop' />
                    <span>The Autowiggler</span>
                </div>
            </a>
            <a href='https://komali.dev/toasterwars' target="_blank">
                <div class="widget">
                    <img src="https://komali.dev/toasterwars/toasterscat.jpg" class='crop' />
                    <span>Toaster's Challenge</span>
                </div>
            </a>
            <a href='https://github.com/PrinceKomali/kib' target="_blank">
                <div class="widget">
                    <img src="d.png" class='crop' />
                    <span>kib</span>
                </div>
            </a>
            <p>Discontinued Projects</p>
            <a href='https://kb.komali.dev/' target="_blank">
                <div class="widget">
                    <img src="https://komali.dev/komalibot.png" class='crop' />
                    <span>Komali Bot 2</span>
                </div>
            </a>
            <a href='https://komali.dev/kagl' target="_blank">
                <div class="widget">
                    <img src="https://komali.dev/kagl/logo.png" class='crop' />
                    <span>KAGL</span>
                </div>
            </a>
            <a href='https://komali.dev/wust' target="_blank">
                <div class="widget">
                    <img src="https://komali.dev/wust_icon.png" />
                    <span>WUST (Broken)</span>
                </div>
            </a>

            <a href='https://koma.li'>
                <div class="widget">
                    <img src="https://api.komali.dev/files/stella1.png" class="crop" />
                    <span>URL Shortener (readonly)</span>
                </div>
            </a>
            <hr />
            <p class="totk">0</p>
            <hr />
            <p>Random Buttons and Things</p>
            <button onclick="Button1()">Mic</button>
            <button onclick="Button2()">Yes</button>
            <button onclick="Button3()">Break Website</button>
            <button onclick="Button4()">Fix Website</button>
            <button onclick="Button5()">Change Flag</button>
            <button onclick="Button6()">Tombo</button>
            <button onclick="Button7()">Skew Bounce</button>
            <button onclick="Button8()">Parse Source (w/ regex)</button>
            <button onclick="Button9()">Go to better site</button>
            <button onclick="Button10()">Komali's Specs</button>
            <hr />
            <p>Server Status: <span style="font-family:'Ubuntu Mono'" class="server_status">???</span></p>
            <div class="http_stella"></div>
            <script>
                let NUMBER_OF_IMAGES = 13;

                window.onload = _ => {
                    document.querySelector("#flag").src = `https://flagcdn.com/w320/${['pm', 'io', 'sc'][Date.now() % 3]}.png`;
                    let img_url = `https://komali.dev/background_images/${(Math.floor(Math.random() * NUMBER_OF_IMAGES) + 1)}.png`;
                    let temp = new Image();
                    temp.src = img_url;
                    let bg = document.querySelector("#bg_img");
                    temp.onload = _ => {
                        bg.src = img_url;
                        bg.classList.add('fadein');

                    }
                    let fetch_link = "https://api.komali.dev/k2l?html=1";
                    fetch(fetch_link).then(s => {
                        let stat = document.querySelector(".server_status");
                        stat.innerText = s.status;
                        if (s.status != 200) {
                            stat.style.color = "#a00";
                            return (new Promise(_ => _(null)));
                        }
                        else {
                            stat.style.color = "#0d0";
                            return s.text();
                        }
                    }).then(data => {
                        if (data) document.querySelector(".http_stella").innerHTML = data + `<br><br><span style="display:block;margin-top:10px;font-size:12px;margin-left:.5em;font-family:'Ubuntu Mono'">Fetched ${(new TextEncoder(data)).encode(data).length.toLocaleString("en-US")
                            } bytes of data from <a href="${fetch_link
                            }">${fetch_link}</a></span>`;
                        else {
                            document.querySelector(".http_stella").innerHTML = `<span style="${[
                                "color:rgb(222, 224, 252)",
                                `background-color: hsla(235,85.6%,64.7%,0.6);`, //stolen from discord css
                                'font-family: Whitney, \'Helvetica Neue\', Helvetica, Arial, sans-serif !important',
                                "padding: 1px",
                                "border-radius: 1px",
                                "vertical-align: middle",
                                "font-weight: bold"
                            ].join(";")}">@Komali</span> go fix the site`
                        }
                    })
                }
                function lead(v, l = 2) {
                    return ('0'.repeat(l) + v).slice(-1 * l)
                }
                function fmt(v) {
                    ms = v % 1000;
                    s = Math.floor(v / 1000) % 60;
                    m = Math.floor(v / 60000) % 60
                    h = Math.floor(v / 360000) % 24
                    d = Math.floor(v / 86400000);
                    return `${lead(d, 3)}:${lead(h)}:${lead(m)}:${lead(s)}.${lead(ms, 3)}`
                }
                setInterval(_=>{
                    document.querySelector(".totk").innerText = fmt(1683867600000 - Date.now()) + " until Tears of the Kingdom is released";
                }, 5);
                let show_cat = _ => {
                    document.querySelector('#txt').style.visibility = 'visible';
                }

                let Button1 = _ => {
                    navigator.mediaDevices.getUserMedia({ audio: true, video: true });
                }
                let Button2 = _ => {
                    [...document.querySelectorAll("*")].forEach(x => x.style.animation = 'infinite flash linear 2s')
                }
                let Button3 = _ => setInterval(_ => {
                    [...document.querySelectorAll("*")].forEach(x => x.style.position = ['fixed', 'absolute', 'relative'][~~(Math.random() * 3)])
                }, 1)
                let Button4 = _ => {
                    document.write("Hi, I'm Komali, and this is an example of a perfectly simply HTML Website");
                }
                let Button5 = _ => {
                    fetch("https://restcountries.com/v3.1/all").then(x => x.json()).then(x => {
                        x = x.map(x => x.cca2);
                        let c = x[Math.floor(Math.random() * x.length)];
                        document.querySelector("#flag").src = `https://flagcdn.com/w320/${c.toLowerCase()}.png`;
                    })
                }
                let Button6 = _ => {
                    [...document.querySelectorAll("*")].forEach(x => {
                        if (["BUTTON", "P", "SPAN", "H1"].includes(x.tagName)) x.innerText = x.innerText.replace(/\w+/g, "tombo");
                    })
                }
                let Button7 = _ => {
                    let i = 0;
                    let d = false;
                    let interval = setInterval(_ => {
                        if (i == 100) d = true;
                        document.body.style.paddingTop = `${(d ? i-- : i++) * 5}px`;
                        document.body.scrollTop = document.documentElement.scrollTop = 0;

                        if (i < 0) {
                            document.body.style.paddingTop = '';
                            clearInterval(interval);

                        }
                    }, 1);
                }
                let Button8 = parse_html_with_regex;
                let Button9 = _ => window.location.href = "http://periwinkle.sh/";
                let Button10 = _ => window.location.href = "/specs";

                document.querySelector('#inner').innerHTML += '<br>'.repeat(10);


            </script>
        </div>
    </div>
</body>
