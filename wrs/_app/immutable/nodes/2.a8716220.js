import{S as le,i as ae,s as oe,k as g,q as T,l as p,m as b,r as D,h as d,n as u,b as K,G as o,u as x,H as te,e as _e,J as de,a as N,c as G,g as ee,f as Me,d as se,K as ve,o as je,L as Ae,y as me,z as ge,A as pe,B as be,v as Te}from"../chunks/index.6b92aaf9.js";function De(l){let e,s,t;return{c(){e=g("div"),s=T(l[0]),this.h()},l(n){e=p(n,"DIV",{class:!0,style:!0});var f=b(e);s=D(f,l[0]),f.forEach(d),this.h()},h(){u(e,"class","name svelte-1pom4uv"),u(e,"style",t=`background-image: linear-gradient(to right, ${l[1]}, ${l[2]})`)},m(n,f){K(n,e,f),o(e,s)},p(n,[f]){f&1&&x(s,n[0]),f&6&&t!==(t=`background-image: linear-gradient(to right, ${n[1]}, ${n[2]})`)&&u(e,"style",t)},i:te,o:te,d(n){n&&d(e)}}}function $e(l,e,s){let{name:t}=e,{from:n}=e,{to:f}=e;return l.$$set=h=>{"name"in h&&s(0,t=h.name),"from"in h&&s(1,n=h.from),"to"in h&&s(2,f=h.to)},[t,n,f]}class we extends le{constructor(e){super(),ae(this,e,$e,De,oe,{name:0,from:1,to:2})}}function ke(l){let e,s,t,n;return{c(){e=g("div"),s=g("img"),this.h()},l(f){e=p(f,"DIV",{class:!0});var h=b(e);s=p(h,"IMG",{class:!0,src:!0,alt:!0}),h.forEach(d),this.h()},h(){u(s,"class","flag_img svelte-1k25bsj"),de(s.src,t=`https://flags.komali.dev/svg/${l[0]}.svg`)||u(s,"src",t),u(s,"alt",n=`flag_${l[0]}`),u(e,"class","flag svelte-1k25bsj")},m(f,h){K(f,e,h),o(e,s)},p(f,h){h&1&&!de(s.src,t=`https://flags.komali.dev/svg/${f[0]}.svg`)&&u(s,"src",t),h&1&&n!==(n=`flag_${f[0]}`)&&u(s,"alt",n)},d(f){f&&d(e)}}}function Oe(l){let e,s=l[0]!=""&&ke(l);return{c(){s&&s.c(),e=_e()},l(t){s&&s.l(t),e=_e()},m(t,n){s&&s.m(t,n),K(t,e,n)},p(t,[n]){t[0]!=""?s?s.p(t,n):(s=ke(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:te,o:te,d(t){s&&s.d(t),t&&d(e)}}}function He(l,e,s){let{code:t}=e;return l.$$set=n=>{"code"in n&&s(0,t=n.code)},[t]}class Ie extends le{constructor(e){super(),ae(this,e,He,Oe,oe,{code:0})}}function ye(l,e,s){const t=l.slice();return t[9]=e[s],t}function Ee(l,e,s){const t=l.slice();return t[9]=e[s],t}function Ne(l){let e,s,t,n,f,h;return{c(){e=g("input"),s=N(),t=g("label"),n=T(l[9]),this.h()},l(_){e=p(_,"INPUT",{class:!0,type:!0,name:!0,id:!0}),s=G(_),t=p(_,"LABEL",{for:!0,class:!0});var m=b(t);n=D(m,l[9]),m.forEach(d),this.h()},h(){u(e,"class","labeled svelte-16s098h"),u(e,"type","radio"),u(e,"name","cat_switch"),u(e,"id","switch_"+l[9].replace(/[% ]/g,"")),u(t,"for","switch_"+l[9].replace(/[% ]/g,"")),u(t,"class","svelte-16s098h")},m(_,m){K(_,e,m),K(_,s,m),K(_,t,m),o(t,n),f||(h=Ae(e,"click",l[2]),f=!0)},p:te,d(_){_&&d(e),_&&d(s),_&&d(t),f=!1,h()}}}function Ge(l){let e,s,t=l[3](Object.keys(l[0]).sort(l[5]).map(l[6]).indexOf(l[0][l[9]].counts[l[1]])+1)+"",n,f,h,_,m,M,C,v,E=l[0][l[9]].counts.all+"",B,$,w,I=l[0][l[9]].counts["Any%"]+"",O,j,L,V=l[0][l[9]].counts["No Major Glitches"]+"",F,Q,H,R=l[0][l[9]].counts["100%"]+"",J,S,P,U=l[0][l[9]].counts["No Major Glitches 100%"]+"",z,W,k;return _=new Ie({props:{code:l[0][l[9]].location}}),M=new we({props:{name:l[9],from:l[0][l[9]].colors,to:l[0][l[9]].colors[1]}}),{c(){e=g("tr"),s=g("td"),n=T(t),f=N(),h=g("td"),me(_.$$.fragment),m=N(),me(M.$$.fragment),C=N(),v=g("td"),B=T(E),$=N(),w=g("td"),O=T(I),j=N(),L=g("td"),F=T(V),Q=N(),H=g("td"),J=T(R),S=N(),P=g("td"),z=T(U),W=N(),this.h()},l(i){e=p(i,"TR",{class:!0});var a=b(e);s=p(a,"TD",{class:!0});var X=b(s);n=D(X,t),X.forEach(d),f=G(a),h=p(a,"TD",{class:!0});var c=b(h);ge(_.$$.fragment,c),m=G(c),ge(M.$$.fragment,c),c.forEach(d),C=G(a),v=p(a,"TD",{class:!0});var y=b(v);B=D(y,E),y.forEach(d),$=G(a),w=p(a,"TD",{class:!0});var r=b(w);O=D(r,I),r.forEach(d),j=G(a),L=p(a,"TD",{class:!0});var q=b(L);F=D(q,V),q.forEach(d),Q=G(a),H=p(a,"TD",{class:!0});var Y=b(H);J=D(Y,R),Y.forEach(d),S=G(a),P=p(a,"TD",{class:!0});var A=b(P);z=D(A,U),A.forEach(d),W=G(a),a.forEach(d),this.h()},h(){u(s,"class","place svelte-16s098h"),u(h,"class","svelte-16s098h"),u(v,"class","svelte-16s098h"),u(w,"class","svelte-16s098h"),u(L,"class","svelte-16s098h"),u(H,"class","svelte-16s098h"),u(P,"class","svelte-16s098h"),u(e,"class","svelte-16s098h")},m(i,a){K(i,e,a),o(e,s),o(s,n),o(e,f),o(e,h),pe(_,h,null),o(h,m),pe(M,h,null),o(e,C),o(e,v),o(v,B),o(e,$),o(e,w),o(w,O),o(e,j),o(e,L),o(L,F),o(e,Q),o(e,H),o(H,J),o(e,S),o(e,P),o(P,z),o(e,W),k=!0},p(i,a){(!k||a&3)&&t!==(t=i[3](Object.keys(i[0]).sort(i[5]).map(i[6]).indexOf(i[0][i[9]].counts[i[1]])+1)+"")&&x(n,t);const X={};a&3&&(X.code=i[0][i[9]].location),_.$set(X);const c={};a&3&&(c.name=i[9]),a&3&&(c.from=i[0][i[9]].colors),a&3&&(c.to=i[0][i[9]].colors[1]),M.$set(c),(!k||a&3)&&E!==(E=i[0][i[9]].counts.all+"")&&x(B,E),(!k||a&3)&&I!==(I=i[0][i[9]].counts["Any%"]+"")&&x(O,I),(!k||a&3)&&V!==(V=i[0][i[9]].counts["No Major Glitches"]+"")&&x(F,V),(!k||a&3)&&R!==(R=i[0][i[9]].counts["100%"]+"")&&x(J,R),(!k||a&3)&&U!==(U=i[0][i[9]].counts["No Major Glitches 100%"]+"")&&x(z,U)},i(i){k||(ee(_.$$.fragment,i),ee(M.$$.fragment,i),k=!0)},o(i){se(_.$$.fragment,i),se(M.$$.fragment,i),k=!1},d(i){i&&d(e),be(_),be(M)}}}function Ve(l){let e,s,t,n,f,h,_,m,M,C,v,E,B,$,w,I,O,j,L,V,F,Q,H,R,J,S,P,U,z,W=["All","Any%","NMG","100%","NMG 100%"],k=[];for(let c=0;c<5;c+=1)k[c]=Ne(Ee(l,W,c));let i=Object.keys(l[0]).sort(l[4]),a=[];for(let c=0;c<i.length;c+=1)a[c]=Ge(ye(l,i,c));const X=c=>se(a[c],1,1,()=>{a[c]=null});return{c(){e=g("div"),s=g("div"),t=N(),n=g("div"),f=g("div");for(let c=0;c<5;c+=1)k[c].c();h=N(),_=g("table"),m=g("tr"),M=g("th"),C=T("#"),v=g("th"),E=T("Name"),B=N(),$=g("th"),w=T("All"),I=N(),O=g("th"),j=T("Any%"),L=N(),V=g("th"),F=T("NMG"),Q=N(),H=g("th"),R=T("100%"),J=N(),S=g("th"),P=T("NMG 100%"),U=N();for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=p(c,"DIV",{class:!0});var y=b(e);s=p(y,"DIV",{class:!0}),b(s).forEach(d),t=G(y),n=p(y,"DIV",{class:!0});var r=b(n);f=p(r,"DIV",{class:!0});var q=b(f);for(let Z=0;Z<5;Z+=1)k[Z].l(q);q.forEach(d),h=G(r),_=p(r,"TABLE",{class:!0});var Y=b(_);m=p(Y,"TR",{class:!0});var A=b(m);M=p(A,"TH",{class:!0});var re=b(M);C=D(re,"#"),re.forEach(d),v=p(A,"TH",{class:!0});var ne=b(v);E=D(ne,"Name"),ne.forEach(d),B=G(A),$=p(A,"TH",{class:!0});var ce=b($);w=D(ce,"All"),ce.forEach(d),I=G(A),O=p(A,"TH",{class:!0});var ie=b(O);j=D(ie,"Any%"),ie.forEach(d),L=G(A),V=p(A,"TH",{class:!0});var fe=b(V);F=D(fe,"NMG"),fe.forEach(d),Q=G(A),H=p(A,"TH",{class:!0});var ue=b(H);R=D(ue,"100%"),ue.forEach(d),J=G(A),S=p(A,"TH",{class:!0});var he=b(S);P=D(he,"NMG 100%"),he.forEach(d),A.forEach(d),U=G(Y);for(let Z=0;Z<a.length;Z+=1)a[Z].l(Y);Y.forEach(d),r.forEach(d),y.forEach(d),this.h()},h(){u(s,"class","background"),u(f,"class","selects svelte-16s098h"),u(M,"class","place svelte-16s098h"),u(v,"class","svelte-16s098h"),u($,"class","svelte-16s098h"),u(O,"class","svelte-16s098h"),u(V,"class","svelte-16s098h"),u(H,"class","svelte-16s098h"),u(S,"class","svelte-16s098h"),u(m,"class","svelte-16s098h"),u(_,"class","svelte-16s098h"),u(n,"class","main svelte-16s098h"),u(e,"class","container svelte-16s098h")},m(c,y){K(c,e,y),o(e,s),o(e,t),o(e,n),o(n,f);for(let r=0;r<5;r+=1)k[r]&&k[r].m(f,null);o(n,h),o(n,_),o(_,m),o(m,M),o(M,C),o(m,v),o(v,E),o(m,B),o(m,$),o($,w),o(m,I),o(m,O),o(O,j),o(m,L),o(m,V),o(V,F),o(m,Q),o(m,H),o(H,R),o(m,J),o(m,S),o(S,P),o(_,U);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(_,null);z=!0},p(c,[y]){if(y&4){W=["All","Any%","NMG","100%","NMG 100%"];let r;for(r=0;r<5;r+=1){const q=Ee(c,W,r);k[r]?k[r].p(q,y):(k[r]=Ne(q),k[r].c(),k[r].m(f,null))}for(;r<5;r+=1)k[r].d(1)}if(y&11){i=Object.keys(c[0]).sort(c[4]);let r;for(r=0;r<i.length;r+=1){const q=ye(c,i,r);a[r]?(a[r].p(q,y),ee(a[r],1)):(a[r]=Ge(q),a[r].c(),ee(a[r],1),a[r].m(_,null))}for(Te(),r=i.length;r<a.length;r+=1)X(r);Me()}},i(c){if(!z){for(let y=0;y<i.length;y+=1)ee(a[y]);z=!0}},o(c){a=a.filter(Boolean);for(let y=0;y<a.length;y+=1)se(a[y]);z=!1},d(c){c&&d(e),ve(k,c),ve(a,c)}}}function qe(l,e,s){let t={},n=async()=>{let v=await(await fetch("https://api.komali.dev/ils")).json(),{lb:E}=v,B=Object.keys(E);for(let $ of B)for(let w of Object.keys(E[$]))for(let I of Object.keys(E[$][w]))for(let O of E[$][w][I].filter(j=>j.place==1))for(let j of O.runners)t[j]||s(0,t[j]={colors:v.players[j].colors,location:(v.players[j].location||"").split("/")[0],counts:{"Any%":0,"No Major Glitches":0,"100%":0,"No Major Glitches 100%":0,all:0}},t),s(0,t[j].counts[I]++,t),s(0,t[j].counts.all++,t);document.querySelector("#switch_All").checked=!0},f="all";function h(){s(1,f=["all","Any%","No Major Glitches","100%","No Major Glitches 100%"][["All","Any","NMG","100","NMG100"].map(v=>document.querySelector("#switch_"+v).checked).indexOf(!0)])}let _=v=>v+(["st","nd","rd"][(((v<0?-v:v)+90)%100-10)%10-1]||"th");return je(n),[t,f,h,_,(v,E)=>t[E].counts[f]-t[v].counts[f],(v,E)=>t[E].counts[f]-t[v].counts[f],v=>t[v].counts[f]]}class Le extends le{constructor(e){super(),ae(this,e,qe,Ve,oe,{})}}export{Le as component};
