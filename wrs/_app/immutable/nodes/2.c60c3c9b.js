import{S as se,i as oe,s as ae,k as p,q as T,l as g,m as b,r as j,h as _,n as h,b as K,G as a,u as x,H as te,e as de,J as _e,a as E,c as N,g as ee,f as Me,d as le,K as me,o as Ae,L as Te,y as ve,z as pe,A as ge,B as be,v as je}from"../chunks/index.6b92aaf9.js";function De(s){let e,l,t;return{c(){e=p("div"),l=T(s[0]),this.h()},l(r){e=g(r,"DIV",{class:!0,style:!0});var u=b(e);l=j(u,s[0]),u.forEach(_),this.h()},h(){h(e,"class","name svelte-1pom4uv"),h(e,"style",t=`background-image: linear-gradient(to right, ${s[1]}, ${s[2]})`)},m(r,u){K(r,e,u),a(e,l)},p(r,[u]){u&1&&x(l,r[0]),u&6&&t!==(t=`background-image: linear-gradient(to right, ${r[1]}, ${r[2]})`)&&h(e,"style",t)},i:te,o:te,d(r){r&&_(e)}}}function $e(s,e,l){let{name:t}=e,{from:r}=e,{to:u}=e;return s.$$set=f=>{"name"in f&&l(0,t=f.name),"from"in f&&l(1,r=f.from),"to"in f&&l(2,u=f.to)},[t,r,u]}class we extends se{constructor(e){super(),oe(this,e,$e,De,ae,{name:0,from:1,to:2})}}function ke(s){let e,l,t,r;return{c(){e=p("div"),l=p("img"),this.h()},l(u){e=g(u,"DIV",{class:!0});var f=b(e);l=g(f,"IMG",{class:!0,src:!0,alt:!0}),f.forEach(_),this.h()},h(){h(l,"class","flag_img svelte-k1k8ap"),_e(l.src,t=`https://flags.komali.dev/svg/${s[0]}.svg`)||h(l,"src",t),h(l,"alt",r=`flag_${s[0]}`),h(e,"class","flag svelte-k1k8ap")},m(u,f){K(u,e,f),a(e,l)},p(u,f){f&1&&!_e(l.src,t=`https://flags.komali.dev/svg/${u[0]}.svg`)&&h(l,"src",t),f&1&&r!==(r=`flag_${u[0]}`)&&h(l,"alt",r)},d(u){u&&_(e)}}}function Oe(s){let e,l=s[0]!=""&&ke(s);return{c(){l&&l.c(),e=de()},l(t){l&&l.l(t),e=de()},m(t,r){l&&l.m(t,r),K(t,e,r)},p(t,[r]){t[0]!=""?l?l.p(t,r):(l=ke(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:te,o:te,d(t){l&&l.d(t),t&&_(e)}}}function He(s,e,l){let{code:t}=e;return s.$$set=r=>{"code"in r&&l(0,t=r.code)},[t]}class Ie extends se{constructor(e){super(),oe(this,e,He,Oe,ae,{code:0})}}function ye(s,e,l){const t=s.slice();return t[12]=e[l],t}function Ee(s,e,l){const t=s.slice();return t[12]=e[l],t}function Ne(s){let e,l,t,r,u,f;return{c(){e=p("input"),l=E(),t=p("label"),r=T(s[12]),this.h()},l(d){e=g(d,"INPUT",{class:!0,type:!0,name:!0,id:!0}),l=N(d),t=g(d,"LABEL",{for:!0,class:!0});var m=b(t);r=j(m,s[12]),m.forEach(_),this.h()},h(){h(e,"class","labeled svelte-dopbom"),h(e,"type","radio"),h(e,"name","cat_switch"),h(e,"id","switch_"+s[12].replace(/[% ]/g,"")),h(t,"for","switch_"+s[12].replace(/[% ]/g,"")),h(t,"class","svelte-dopbom")},m(d,m){K(d,e,m),K(d,l,m),K(d,t,m),a(t,r),u||(f=Te(e,"click",s[2]),u=!0)},p:te,d(d){d&&_(e),d&&_(l),d&&_(t),u=!1,f()}}}function Ge(s){let e,l,t=s[3](Object.keys(s[0]).sort(s[5]).map(s[6]).indexOf(s[0][s[12]].counts[s[1]])+1)+"",r,u,f,d,m,G,C,D,v=s[0][s[12]].counts.all+"",$,w,O,V=s[0][s[12]].counts["Any%"]+"",H,M,L,q=s[0][s[12]].counts["No Major Glitches"]+"",F,Q,I,R=s[0][s[12]].counts["100%"]+"",J,S,P,U=s[0][s[12]].counts["No Major Glitches 100%"]+"",z,W,k;return d=new Ie({props:{code:s[0][s[12]].location}}),G=new we({props:{name:s[12],from:s[0][s[12]].colors,to:s[0][s[12]].colors[1]}}),{c(){e=p("tr"),l=p("td"),r=T(t),u=E(),f=p("td"),ve(d.$$.fragment),m=E(),ve(G.$$.fragment),C=E(),D=p("td"),$=T(v),w=E(),O=p("td"),H=T(V),M=E(),L=p("td"),F=T(q),Q=E(),I=p("td"),J=T(R),S=E(),P=p("td"),z=T(U),W=E(),this.h()},l(i){e=g(i,"TR",{class:!0});var o=b(e);l=g(o,"TD",{class:!0});var X=b(l);r=j(X,t),X.forEach(_),u=N(o),f=g(o,"TD",{class:!0});var c=b(f);pe(d.$$.fragment,c),m=N(c),pe(G.$$.fragment,c),c.forEach(_),C=N(o),D=g(o,"TD",{class:!0});var y=b(D);$=j(y,v),y.forEach(_),w=N(o),O=g(o,"TD",{class:!0});var n=b(O);H=j(n,V),n.forEach(_),M=N(o),L=g(o,"TD",{class:!0});var B=b(L);F=j(B,q),B.forEach(_),Q=N(o),I=g(o,"TD",{class:!0});var Y=b(I);J=j(Y,R),Y.forEach(_),S=N(o),P=g(o,"TD",{class:!0});var A=b(P);z=j(A,U),A.forEach(_),W=N(o),o.forEach(_),this.h()},h(){h(l,"class","place svelte-dopbom"),h(f,"class","svelte-dopbom"),h(D,"class","svelte-dopbom"),h(O,"class","svelte-dopbom"),h(L,"class","svelte-dopbom"),h(I,"class","svelte-dopbom"),h(P,"class","svelte-dopbom"),h(e,"class","svelte-dopbom")},m(i,o){K(i,e,o),a(e,l),a(l,r),a(e,u),a(e,f),ge(d,f,null),a(f,m),ge(G,f,null),a(e,C),a(e,D),a(D,$),a(e,w),a(e,O),a(O,H),a(e,M),a(e,L),a(L,F),a(e,Q),a(e,I),a(I,J),a(e,S),a(e,P),a(P,z),a(e,W),k=!0},p(i,o){(!k||o&3)&&t!==(t=i[3](Object.keys(i[0]).sort(i[5]).map(i[6]).indexOf(i[0][i[12]].counts[i[1]])+1)+"")&&x(r,t);const X={};o&3&&(X.code=i[0][i[12]].location),d.$set(X);const c={};o&3&&(c.name=i[12]),o&3&&(c.from=i[0][i[12]].colors),o&3&&(c.to=i[0][i[12]].colors[1]),G.$set(c),(!k||o&3)&&v!==(v=i[0][i[12]].counts.all+"")&&x($,v),(!k||o&3)&&V!==(V=i[0][i[12]].counts["Any%"]+"")&&x(H,V),(!k||o&3)&&q!==(q=i[0][i[12]].counts["No Major Glitches"]+"")&&x(F,q),(!k||o&3)&&R!==(R=i[0][i[12]].counts["100%"]+"")&&x(J,R),(!k||o&3)&&U!==(U=i[0][i[12]].counts["No Major Glitches 100%"]+"")&&x(z,U)},i(i){k||(ee(d.$$.fragment,i),ee(G.$$.fragment,i),k=!0)},o(i){le(d.$$.fragment,i),le(G.$$.fragment,i),k=!1},d(i){i&&_(e),be(d),be(G)}}}function Ve(s){let e,l,t,r,u,f,d,m,G,C,D,v,$,w,O,V,H,M,L,q,F,Q,I,R,J,S,P,U,z,W=["All","Any%","NMG","100%","NMG 100%"],k=[];for(let c=0;c<5;c+=1)k[c]=Ne(Ee(s,W,c));let i=Object.keys(s[0]).sort(s[4]),o=[];for(let c=0;c<i.length;c+=1)o[c]=Ge(ye(s,i,c));const X=c=>le(o[c],1,1,()=>{o[c]=null});return{c(){e=p("div"),l=p("div"),t=E(),r=p("div"),u=p("div");for(let c=0;c<5;c+=1)k[c].c();f=E(),d=p("table"),m=p("tr"),G=p("th"),C=T("#"),D=p("th"),v=T("Name"),$=E(),w=p("th"),O=T("All"),V=E(),H=p("th"),M=T("Any%"),L=E(),q=p("th"),F=T("NMG"),Q=E(),I=p("th"),R=T("100%"),J=E(),S=p("th"),P=T("NMG 100%"),U=E();for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){e=g(c,"DIV",{class:!0});var y=b(e);l=g(y,"DIV",{class:!0}),b(l).forEach(_),t=N(y),r=g(y,"DIV",{class:!0});var n=b(r);u=g(n,"DIV",{class:!0});var B=b(u);for(let Z=0;Z<5;Z+=1)k[Z].l(B);B.forEach(_),f=N(n),d=g(n,"TABLE",{class:!0});var Y=b(d);m=g(Y,"TR",{class:!0});var A=b(m);G=g(A,"TH",{class:!0});var re=b(G);C=j(re,"#"),re.forEach(_),D=g(A,"TH",{class:!0});var ne=b(D);v=j(ne,"Name"),ne.forEach(_),$=N(A),w=g(A,"TH",{class:!0});var ce=b(w);O=j(ce,"All"),ce.forEach(_),V=N(A),H=g(A,"TH",{class:!0});var ie=b(H);M=j(ie,"Any%"),ie.forEach(_),L=N(A),q=g(A,"TH",{class:!0});var fe=b(q);F=j(fe,"NMG"),fe.forEach(_),Q=N(A),I=g(A,"TH",{class:!0});var ue=b(I);R=j(ue,"100%"),ue.forEach(_),J=N(A),S=g(A,"TH",{class:!0});var he=b(S);P=j(he,"NMG 100%"),he.forEach(_),A.forEach(_),U=N(Y);for(let Z=0;Z<o.length;Z+=1)o[Z].l(Y);Y.forEach(_),n.forEach(_),y.forEach(_),this.h()},h(){h(l,"class","background"),h(u,"class","selects svelte-dopbom"),h(G,"class","place svelte-dopbom"),h(D,"class","svelte-dopbom"),h(w,"class","svelte-dopbom"),h(H,"class","svelte-dopbom"),h(q,"class","svelte-dopbom"),h(I,"class","svelte-dopbom"),h(S,"class","svelte-dopbom"),h(m,"class","svelte-dopbom"),h(d,"class","svelte-dopbom"),h(r,"class","main svelte-dopbom"),h(e,"class","container svelte-dopbom")},m(c,y){K(c,e,y),a(e,l),a(e,t),a(e,r),a(r,u);for(let n=0;n<5;n+=1)k[n]&&k[n].m(u,null);a(r,f),a(r,d),a(d,m),a(m,G),a(G,C),a(m,D),a(D,v),a(m,$),a(m,w),a(w,O),a(m,V),a(m,H),a(H,M),a(m,L),a(m,q),a(q,F),a(m,Q),a(m,I),a(I,R),a(m,J),a(m,S),a(S,P),a(d,U);for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(d,null);z=!0},p(c,[y]){if(y&4){W=["All","Any%","NMG","100%","NMG 100%"];let n;for(n=0;n<5;n+=1){const B=Ee(c,W,n);k[n]?k[n].p(B,y):(k[n]=Ne(B),k[n].c(),k[n].m(u,null))}for(;n<5;n+=1)k[n].d(1)}if(y&11){i=Object.keys(c[0]).sort(c[4]);let n;for(n=0;n<i.length;n+=1){const B=ye(c,i,n);o[n]?(o[n].p(B,y),ee(o[n],1)):(o[n]=Ge(B),o[n].c(),ee(o[n],1),o[n].m(d,null))}for(je(),n=i.length;n<o.length;n+=1)X(n);Me()}},i(c){if(!z){for(let y=0;y<i.length;y+=1)ee(o[y]);z=!0}},o(c){o=o.filter(Boolean);for(let y=0;y<o.length;y+=1)le(o[y]);z=!1},d(c){c&&_(e),me(k,c),me(o,c)}}}function qe(s,e,l){let t={},r={},u=async()=>{let v=await(await fetch("https://api.komali.dev/ils")).json();r=v.lb;let $=Object.keys(r);for(let w of $)for(let O of Object.keys(r[w]))for(let V of Object.keys(r[w][O]))for(let H of r[w][O][V].filter(M=>M.place==1))for(let M of H.runners)t[M]||l(0,t[M]={colors:v.players[M].colors,location:(v.players[M].location||"").split("/")[0],counts:{"Any%":0,"No Major Glitches":0,"100%":0,"No Major Glitches 100%":0,all:0}},t),l(0,t[M].counts[V]++,t),l(0,t[M].counts.all++,t);document.querySelector("#switch_All").checked=!0},f="all";function d(){l(1,f=["all","Any%","No Major Glitches","100%","No Major Glitches 100%"][["All","Any","NMG","100","NMG100"].map(v=>document.querySelector("#switch_"+v).checked).indexOf(!0)])}let m=v=>v+(["st","nd","rd"][(((v<0?-v:v)+90)%100-10)%10-1]||"th");return Ae(u),[t,f,d,m,(v,$)=>t[$].counts[f]-t[v].counts[f],(v,$)=>t[$].counts[f]-t[v].counts[f],v=>t[v].counts[f]]}class Le extends se{constructor(e){super(),oe(this,e,qe,Ve,ae,{})}}export{Le as component};
